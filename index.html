<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Macro Tracker</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>

<main id="mainContent">
    <!-- Dashboard Section -->
    <section id="dashboardPage">
        <h1>Dashboard</h1>
        <p>This is your dashboard content area.</p>
    </section>

    <!-- Habits Section -->
    <section id="habitsPage" style="display: none;">
        <h1>Habits</h1>
        <div id="habitGrid"></div>
    </section>

    <!-- Settings Section -->
    <section id="settingsPage" style="display: none;">
        <h1>Settings</h1>
        <form id="habitForm">
            <input type="text" id="habitName" placeholder="New habit name" required />
            <input type="color" id="habitColor" value="#81c784" />
            <button type="submit">Add Habit</button>
        </form>
        <ul id="habitListSettings"></ul>
    </section>
</main>

<!-- Nav + Log Button Placeholder -->
<div id="common-nav-placeholder"></div>

<script>
    // Show a specific page
    function showPage(pageId) {
      const sections = document.querySelectorAll('main > section');
      sections.forEach(section => {
        section.style.display = (section.id === pageId) ? 'block' : 'none';
      });
    }

    // Load the default page
    window.addEventListener('DOMContentLoaded', () => {
      showPage('dashboardPage');

      // Load common nav
      fetch('common-nav.html')
        .then(res => res.text())
        .then(html => {
          document.getElementById('common-nav-placeholder').innerHTML = html;

          // Add log button toggle behavior
          const logBtnContainer = document.getElementById('logBtnContainer');
          const logBtn = document.getElementById('logBtn');

          if (logBtn && logBtnContainer) {
            logBtn.addEventListener('click', () => {
              logBtnContainer.classList.toggle('active');
              const pressed = logBtn.getAttribute('aria-pressed') === 'true';
              logBtn.setAttribute('aria-pressed', String(!pressed));
            });

            document.addEventListener('click', (e) => {
              if (!logBtnContainer.contains(e.target)) {
                logBtnContainer.classList.remove('active');
                logBtn.setAttribute('aria-pressed', 'false');
              }
            });
          }
        })
        .catch(err => console.error('Failed to load common-nav.html:', err));
    });
</script>

</body>
</html>
